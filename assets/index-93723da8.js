var e=(e,t,s)=>new Promise(((r,o)=>{var i=e=>{try{n(s.next(e))}catch(e){o(e)}},a=e=>{try{n(s.throw(e))}catch(e){o(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);n((s=s.apply(e,t)).next())}));import{j as t,u as s,r,i as o,h as i}from"./index-fcb0bb05.js";import{c as a,F as n}from"./FlexBetween-5d046802.js";import p from"./index-d681cbd5.js";import{W as c}from"./WidgetWrapper-f0a9ba71.js";import{u as d,T as l}from"./Typography-810c0d43.js";import{I as u}from"./IconButton-35c45613.js";import{u as m}from"./useDispatch-85035b33.js";import"./App-a85cb71a.js";import"./useMediaQuery-5959baa1.js";import"./UserImage-da39b379.js";import"./ButtonBase-c83808f4.js";const h=a(t.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined"),j=a(t.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined"),f=({postId:i,postUserId:a,name:f,description:x,location:y,picturePath:P,userPicturePath:k,likes:I})=>{const w=m(),g=s((e=>e.token)),v=s((e=>{var t;return null==(t=e.user)?void 0:t._id})),[B,C]=r.useState(I),$=Boolean(B[v]),T=Object.keys(B).length,{_id:z}=s((e=>e.user)),{palette:A}=d(),{main:F}=A.neutral,b=A.primary.main;return t.jsxs(c,{m:"2rem 0",children:[t.jsx(p,{userId:z,friendId:a,name:f,subtitle:y,userPicturePath:k}),t.jsx(l,{color:F,sx:{mt:"1rem"},children:x}),P&&t.jsx("img",{width:"100%",height:"auto",alt:"post",style:{borderRadius:"0.75rem",marginTop:"0.75rem"},src:`social-network-production-ca2f.up.railway.app/assets/${P}`}),t.jsx(n,{mt:"0.25rem",children:t.jsx(n,{gap:"1rem",children:t.jsxs(n,{gap:"0.3rem",children:[t.jsx(u,{onClick:()=>e(void 0,null,(function*(){const e=yield fetch(`social-network-production-ca2f.up.railway.app/posts/${i}/like`,{method:"PATCH",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({userId:v})}),t=yield e.json();w(o({postId:i,post:t})),C(t.likes)})),children:$?t.jsx(j,{sx:{color:b}}):t.jsx(h,{})}),t.jsx(l,{children:T})]})})})]})},x=({userPostsId:o,isProfile:a=!1})=>{const n=m(),p=s((e=>e.posts)),c=s((e=>e.token));return r.useEffect((()=>{e(void 0,null,a?function*(){const e=yield fetch(`social-network-production-ca2f.up.railway.app/posts/${o}/posts`,{method:"GET",headers:{Authorization:`Bearer ${c}`}}),t=yield e.json();n(i({posts:t}))}:function*(){const e=yield fetch("social-network-production-ca2f.up.railway.app/posts",{method:"GET",headers:{Authorization:`Bearer ${c}`}}),t=yield e.json();n(i({posts:t}))})}),[]),t.jsx(t.Fragment,{children:p.map((({_id:e,firstName:s,lastName:r,description:o,location:i,picturePath:a,userPicturePath:n,likes:p,userId:c})=>t.jsx(f,{postId:e,postUserId:c,name:`${s} ${r}`,description:o,location:i,picturePath:a,userPicturePath:n,likes:p},e)))})};export{x as default};
