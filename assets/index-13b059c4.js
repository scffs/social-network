var e=Object.defineProperty,r=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(r,s,o)=>s in r?e(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,n=(e,r)=>{for(var s in r||(r={}))t.call(r,s)&&i(e,s,r[s]);if(o)for(var s of o(r))a.call(r,s)&&i(e,s,r[s]);return e};import{j as l,r as p,u as d,h as c}from"./index-fcb0bb05.js";import{D as m,B as u}from"./index-99a3e23a.js";import{c as h,F as j}from"./FlexBetween-5d046802.js";import{W as x}from"./WidgetWrapper-f0a9ba71.js";import{U as v}from"./UserImage-da39b379.js";import{I as f}from"./InputBase-680a6c7a.js";import{B as b}from"./useMediaQuery-5959baa1.js";import{u as g,T as y}from"./Typography-810c0d43.js";import{I as w}from"./IconButton-35c45613.js";import{D as O}from"./Divider-f9561c6e.js";import{u as P}from"./useDispatch-85035b33.js";import"./App-a85cb71a.js";import"./ButtonBase-c83808f4.js";import"./dividerClasses-0cd52301.js";const k=h(l.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),I=h(l.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined"),B=h(l.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined"),D=({picturePath:e})=>{const o=P(),[t,a]=p.useState(!1),[i,h]=p.useState(null),[D,z]=p.useState(""),{palette:C}=g(),H=d((e=>e.user)),M=d((e=>e.token)),V=null==H?void 0:H._id,{mediumMain:S,medium:L}=C.neutral;return l.jsxs(x,{children:[l.jsxs(j,{gap:"1.5rem",children:[l.jsx(v,{image:e}),l.jsx(f,{placeholder:"Пишите о чём угодно",onChange:e=>z(e.target.value),value:D,sx:{width:"100%",backgroundColor:C.neutral.light,borderRadius:"2rem",padding:"1rem 2rem"}})]}),t&&l.jsx(b,{border:`1px solid ${L}`,borderRadius:"5px",mt:"1rem",p:"1rem",children:l.jsx(m,{multiple:!1,onDrop:e=>h(e[0]),children:({getRootProps:e,getInputProps:o})=>{return l.jsxs(j,{children:[l.jsxs(b,(t=n({},e()),a={border:`2px dashed ${C.primary.main}`,p:"1rem",width:"100%",sx:{"&:hover":{cursor:"pointer"}},children:[l.jsx("input",n({},o())),i?l.jsxs(j,{children:[l.jsx(y,{children:i.name}),l.jsx(I,{})]}):l.jsx("p",{children:"Загрузить изображение"})]},r(t,s(a)))),i&&l.jsx(w,{onClick:()=>h(null),sx:{width:"15%"},children:l.jsx(k,{})})]});var t,a}})}),l.jsx(O,{sx:{margin:"1.25rem 0"}}),l.jsxs(j,{children:[l.jsxs(j,{gap:"0.25rem",onClick:()=>a(!t),children:[l.jsx(B,{sx:{color:S}}),l.jsx(y,{color:S,sx:{"&:hover":{cursor:"pointer",color:L}},children:"Изображение"})]}),l.jsx(u,{disabled:!D,onClick:()=>{return e=void 0,r=null,s=function*(){const e=new FormData;V&&e.append("userId",V),e.append("description",D),i&&(e.append("picture",i),e.append("picturePath",i.name));const r=yield fetch("social-network-production-ca2f.up.railway.app/posts",{method:"POST",headers:{Authorization:`Bearer ${M}`},body:e}),s=yield r.json();o(c({posts:s})),h(null),z("")},new Promise(((o,t)=>{var a=e=>{try{n(s.next(e))}catch(e){t(e)}},i=e=>{try{n(s.throw(e))}catch(e){t(e)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);n((s=s.apply(e,r)).next())}));var e,r,s},sx:{color:C.background.default,backgroundColor:C.primary.dark,borderRadius:"3rem"},children:"Опубликовать"})]})]})};export{D as default};
