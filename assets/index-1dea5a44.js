var t=(t,e,s)=>new Promise(((r,o)=>{var i=t=>{try{n(s.next(t))}catch(t){o(t)}},a=t=>{try{n(s.throw(t))}catch(t){o(t)}},n=t=>t.done?r(t.value):Promise.resolve(t.value).then(i,a);n((s=s.apply(t,e)).next())}));import{j as e,u as s,r,i as o,h as i}from"./index-1543191d.js";import{c as a,F as n}from"./FlexBetween-7d913969.js";import c from"./index-a1b0e7fd.js";import{W as l}from"./WidgetWrapper-6c3920af.js";import{u as p,T as d}from"./Typography-060a127c.js";import{I as h}from"./IconButton-ce7139fc.js";import{u as m}from"./useDispatch-cff4280b.js";import"./App-ad216d79.js";import"./useMediaQuery-34117fbe.js";import"./UserImage-8e95da69.js";import"./ButtonBase-47e26f49.js";const u=a(e.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined"),j=a(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined"),x=({postId:i,postUserId:a,name:x,description:f,location:y,picturePath:P,userPicturePath:I,likes:g})=>{const v=m(),k=s((t=>t.token)),B=s((t=>{var e;return null==(e=t.user)?void 0:e._id})),[C,$]=r.useState(g),T=Boolean(C[B]),z=Object.keys(C).length,{_id:A}=s((t=>t.user)),{palette:F}=p(),{main:b}=F.neutral,w=F.primary.main;return e.jsxs(l,{m:"2rem 0",children:[e.jsx(c,{userId:A,friendId:a,name:x,subtitle:y,userPicturePath:I}),e.jsx(d,{color:b,sx:{mt:"1rem"},children:f}),P&&e.jsx("img",{width:"100%",height:"auto",alt:"post",style:{borderRadius:"0.75rem",marginTop:"0.75rem"},src:`http://localhost:3001/assets/${P}`}),e.jsx(n,{mt:"0.25rem",children:e.jsx(n,{gap:"1rem",children:e.jsxs(n,{gap:"0.3rem",children:[e.jsx(h,{onClick:()=>t(void 0,null,(function*(){const t=yield fetch(`http://localhost:3001/posts/${i}/like`,{method:"PATCH",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"},body:JSON.stringify({userId:B})}),e=yield t.json();v(o({postId:i,post:e})),$(e.likes)})),children:T?e.jsx(j,{sx:{color:w}}):e.jsx(u,{})}),e.jsx(d,{children:z})]})})})]})},f=({userPostsId:o,isProfile:a=!1})=>{const n=m(),c=s((t=>t.posts)),l=s((t=>t.token));return r.useEffect((()=>{t(void 0,null,a?function*(){const t=yield fetch(`http://localhost:3001/posts/${o}/posts`,{method:"GET",headers:{Authorization:`Bearer ${l}`}}),e=yield t.json();n(i({posts:e}))}:function*(){const t=yield fetch("http://localhost:3001/posts",{method:"GET",headers:{Authorization:`Bearer ${l}`}}),e=yield t.json();n(i({posts:e}))})}),[]),e.jsx(e.Fragment,{children:c.map((({_id:t,firstName:s,lastName:r,description:o,location:i,picturePath:a,userPicturePath:n,likes:c,userId:l})=>e.jsx(x,{postId:t,postUserId:l,name:`${s} ${r}`,description:o,location:i,picturePath:a,userPicturePath:n,likes:c},t)))})};export{f as default};
