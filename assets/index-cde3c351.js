var s=(s,t,e)=>new Promise(((r,o)=>{var i=s=>{try{n(e.next(s))}catch(s){o(s)}},a=s=>{try{n(e.throw(s))}catch(s){o(s)}},n=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,a);n((e=e.apply(s,t)).next())}));import{j as t,u as e,r,i as o,h as i}from"./index-aaf2ae70.js";import{c as a,F as n}from"./FlexBetween-37d3138b.js";import c from"./index-3a0b442c.js";import{W as p}from"./WidgetWrapper-e2809c26.js";import{u as d,T as l}from"./Typography-89d80a21.js";import{I as u}from"./IconButton-b7fcdf7a.js";import{u as h}from"./useDispatch-5cd579e2.js";import"./App-db70bfcd.js";import"./useMediaQuery-14101100.js";import"./UserImage-a476862e.js";import"./ButtonBase-91a4f99f.js";const m=a(t.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined"),j=a(t.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined"),f=({postId:i,postUserId:a,name:f,description:x,location:y,picturePath:P,userPicturePath:g,likes:k})=>{const I=h(),v=e((s=>s.token)),B=e((s=>{var t;return null==(t=s.user)?void 0:t._id})),[C,b]=r.useState(k),w=Boolean(C[B]),$=Object.keys(C).length,{_id:T}=e((s=>s.user)),{palette:z}=d(),{main:A}=z.neutral,F=z.primary.main;return t.jsxs(p,{m:"2rem 0",children:[t.jsx(c,{userId:T,friendId:a,name:f,subtitle:y,userPicturePath:g}),t.jsx(l,{color:A,sx:{mt:"1rem"},children:x}),P&&t.jsx("img",{width:"100%",height:"auto",alt:"post",style:{borderRadius:"0.75rem",marginTop:"0.75rem"},src:`https://scffs.github.io/social-network/assets/${P}`}),t.jsx(n,{mt:"0.25rem",children:t.jsx(n,{gap:"1rem",children:t.jsxs(n,{gap:"0.3rem",children:[t.jsx(u,{onClick:()=>s(void 0,null,(function*(){const s=yield fetch(`https://scffs.github.io/social-network/posts/${i}/like`,{method:"PATCH",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({userId:B})}),t=yield s.json();I(o({postId:i,post:t})),b(t.likes)})),children:w?t.jsx(j,{sx:{color:F}}):t.jsx(m,{})}),t.jsx(l,{children:$})]})})})]})},x=({userPostsId:o,isProfile:a=!1})=>{const n=h(),c=e((s=>s.posts)),p=e((s=>s.token));return r.useEffect((()=>{s(void 0,null,a?function*(){const s=yield fetch(`https://scffs.github.io/social-network/posts/${o}/posts`,{method:"GET",headers:{Authorization:`Bearer ${p}`}}),t=yield s.json();n(i({posts:t}))}:function*(){const s=yield fetch("https://scffs.github.io/social-network/posts",{method:"GET",headers:{Authorization:`Bearer ${p}`}}),t=yield s.json();n(i({posts:t}))})}),[]),t.jsx(t.Fragment,{children:c.map((({_id:s,firstName:e,lastName:r,description:o,location:i,picturePath:a,userPicturePath:n,likes:c,userId:p})=>t.jsx(f,{postId:s,postUserId:p,name:`${e} ${r}`,description:o,location:i,picturePath:a,userPicturePath:n,likes:c},s)))})};export{x as default};
